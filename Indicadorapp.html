<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Central SCI</title>

  <style>
    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      overflow: hidden; /* bloqueia scroll global */
      font-family: Arial, sans-serif;
    }

    /* viewport com SCROLL ÃšNICO */
    main {
      height: 100vh;
      overflow-y: auto;
    }

    header {
      height: 64px;
      background: #0f172a;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 0 16px;
    }

    header button {
      padding: 8px 14px;
      border: none;
      background: #1e293b;
      color: #fff;
      cursor: pointer;
      border-radius: 4px;
    }

    header button:hover {
      background: #334155;
    }

    section {
      padding: 0;
    }

    iframe {
      width: 100%;
      border: 0;
      display: none; /* apenas um por vez */
    }

    iframe.ativo {
      display: block;
    }
  </style>
</head>

<body>

<main>

  <header>
    <button onclick="abrir('tempo')">Tempo Resposta</button>
    <button onclick="abrir('epr')">Tempo Resposta EPR</button>
  </header>

  <section>
    <iframe
      data-id="tempo"
      src="https://sescincjoi.github.io/Central-SCI-JOI/Tempo">
    </iframe>

    <iframe
      data-id="epr"
      src="https://sescincjoi.github.io/Central-SCI-JOI/Tempo-TP/EPR">
    </iframe>
  </section>

</main>

<script>
  const iframes = document.querySelectorAll('iframe');

  function abrir(id) {
    iframes.forEach(iframe => {
      iframe.classList.toggle('ativo', iframe.dataset.id === id);
    });
  }

  // recebe altura dos iframes
  window.addEventListener('message', e => {
    if (e.origin !== location.origin) return;

    const { id, altura } = e.data;
    const iframe = document.querySelector(`iframe[data-id="${id}"]`);
    if (iframe) {
      iframe.style.height = altura + 'px';
    }
  });

  // envia altura para os iframes
  abrir('tempo');

  function enviarViewport() {
  const vh = window.innerHeight;
  const vw = window.innerWidth;

  document.querySelectorAll('iframe').forEach(iframe => {
    iframe.contentWindow.postMessage(
      { type: 'viewport', vh, vw },
      location.origin
    );
  });
}

window.addEventListener('load', enviarViewport);
window.addEventListener('resize', enviarViewport);

</script>

</body>
</html>
